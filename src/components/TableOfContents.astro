---
import type { MarkdownHeading } from "astro";

interface Props {
  headings: MarkdownHeading[];
}

const { headings } = Astro.props;
// h2 と h3 のみを抽出
const tocHeadings = headings.filter((h) => h.depth === 2 || h.depth === 3);
---

<nav class="sticky top-24 mt-4 max-h-[calc(100vh-6rem)] overflow-y-auto pr-2">
  <ul class="flex flex-col gap-2.5 text-sm">
    {
      tocHeadings.map((heading) => (
        <li
          class={`leading-snug transition-colors ${
            heading.depth === 2
              ? "text-primary mt-1 font-semibold"
              : "text-subtle pl-4 text-[0.8rem]"
          }`}
        >
          <a
            href={`#${heading.slug}`}
            class="link-subtle hover:text-primary block py-1"
          >
            {heading.text}
          </a>
        </li>
      ))
    }
  </ul>
</nav>

<style>
  nav::-webkit-scrollbar {
    width: 4px;
  }
  nav::-webkit-scrollbar-track {
    background: transparent;
  }
  nav::-webkit-scrollbar-thumb {
    background-color: var(--un-prose-hr);
    border-radius: 4px;
  }
</style>
