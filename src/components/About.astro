---
import { getCollection } from "astro:content";

// Tag configuration
const tags = [
  "Osaka, Japan",
  "TypeScript",
  "Bun",
  "Vue.js",
  "Hono",
  "Swift",
  "Astro",
] as const;

// Get all unique tags from blog posts
const blogPosts = await getCollection("blog");
const blogTags = new Set(
  blogPosts.flatMap((post) => post.data.tags.map((t) => t.toLowerCase())),
);
---

<section class="section-border">
  <h2 class="text-headline mb-6 flex items-center justify-between gap-3">
    About Me
    <small class="text-label">
      <a
        href="/halqme_portfolio.pdf"
        target="_blank"
        class="flex-inline decoration-none items-center gap-1"
      >
         CV / Portfolio (PDF)
        <div class="i-lucide:external-link"></div>
      </a>
    </small>
  </h2>
  <div class="text-body">
    <p>
      Hi, I'm HAL. I am a university student based in Osaka, Japan, majoring in
      Psychology. I have a passion for web development and creating useful
      tools.
    </p>

    <ul class="mt-4 flex list-none flex-wrap gap-3 pl-0 select-none">
      {
        tags.map((label) =>
          blogTags.has(label.toLowerCase()) ? (
            <li class="m-0 p-0">
              <a
                href={`/tags/${label.toLowerCase()}`}
                class="tag decoration-none"
              >
                {label}
              </a>
            </li>
          ) : (
            <li class="m-0 p-0">
              <span class="tag">{label}</span>
            </li>
          ),
        )
      }
    </ul>
  </div>
</section>
